![image-20210304160244711](images/image-20210304160244711.png)

# 双十一秒杀系统

## 1、Jmeter压测

- 并发数、QPS(TPS)、响应时间
- QPS(TPS) = 并发数 / 响应时间
- 秒杀商品列表接口
- 秒杀订单接口

## 2、压测参数

- Nginx并发数：默认1000并发
  - 配置文件中event中调整并发连接数
- tomcat并发数与请求超时时间
  - server.xml中加上maxSpareThreads调整
  - 可以调大accpetCount，排队等待的数量
- redis连接池
  - 最大连接maxActive
- dubbo连接池与超时时间
  - 在provider.xml中调整threads
- 数据库连接池  --Too many connections
  - max_connections最大连接数
  - max_user_connections 最大用户连接数
  - wait_timeout 超时时间 
- linux系统的句柄数 
  - redis一个连接就会打开一个socket就相当于一个句柄，如果超过了就会报错 --Too many open files  （ulimit -n）

